
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>alex studios</title>

    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Aboreto&family=Poppins:wght@800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="../styles.css">


</head>

<body>
  <div class="container-fluid bg-white">
    <div class="row text-lowercase p-2 design">
        <div class="col-4 text-black">alex castillo</div>
        <div class="col-4 text-black text-center">Alex castillo</div>
        <div class="col-4 text-black text-end">alex castillo</div>
    </div>
</div>

<nav class="navbar navbar-expand-md bg-white navbar-dark p-3">
    <div class="container">
       <a href="/mainShop/home.html" class="navbar-brand text-lowercase">Alex Studios</a>

       <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
       data-bs-target="#navmenu"><span class="navbar-toggler-icon bg-dark"></span></button>

       <div class="collapse navbar-collapse" id="navmenu">
            <ul class="navbar-nav m-auto my-2 my-lg-0">
                <li class="nav-item">
                    <a href="../home.html" id="home" class="nav-link active">Home</a>
                </li>
                <li class="nav-item">
                    <a href="../shop.html" id="shop" class="nav-link">Shop</a>
                </li>
                <li class="nav-item account">
                    <a href="../account.html" id="account" class="nav-link">Account</a>
                </li>
                
            </ul>
            <a href="/cart"><i class="fa-solid fa-bag-shopping icon"></i></a>
         
       </div>
    </div>
 
   
</nav>
<div class="container-fluid bg-dark">
    <div class="row text-lowercase p-2 design">
        <div class="col-4 text-white"><span class="name1">alex castillo</span></div>
        <div class="col-4 text-white text-center">Alex castillo</div>
        <div class="col-4 text-white text-end">alex castillo</div>
    </div>
</div>

<div class="cart-items container-fluid p-5">
  <div class="row">
    <h1>Shopping Cart</h1>
    <hr>
    <% let subtotal = 0; %>
    <div class="col-md-8"> <!-- Wrap the cart items in a column -->
      <% cart.forEach(item => { %>
        <div class="cart-item p-3">
          <img src="<%= item.image %>" alt="<%= item.name %>" class="cart-item-image img-fluid p-1">
          <div class="cart-item-details">
            <h4><%= item.name %></h4>
            <p>Price: $<span class="total-price"><%= item.quantity * item.price %></span></p>
            <p>Quantity:
              <button onclick="decreaseQuantity('<%= item.id %>')">-</button>
              <span class="quantity"><%= item.quantity %></span>
              <button onclick="increaseQuantity('<%= item.id %>')">+</button>
            </p>
            <button onclick="removeItem('<%= item.id %>')">Remove</button>
          </div>
        </div>
        <% subtotal += item.quantity * item.price; %>
      <% }); %>
    </div>
    <div class="checkout col-md-3 text-center"> <!-- Wrap the checkout section in a column -->
      <% if (cart.length > 0) { %>
        <h4 class="m-3">Subtotal: $<%= subtotal %></h4>
        <hr>
        <button class="btn m-5">Proceed to checkout</button>
      <% } %>
      <form action="/clearCart" method="POST" class="p-2">
        <button type="submit" class="btn">Clear Cart</button>
      </form>
    </div>
  </div>
</div>



</body>
<script>
  function removeItem(productId) {
    // Send AJAX request to server to remove the item from the cart
    fetch('/remove-from-cart', {
        method: 'POST',
        body: JSON.stringify({ productId }),
        headers: {
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        // Handle response (optional)
        console.log(data);
        // Reload the page or update the cart display as needed
        location.reload(); // Reload the page to reflect the updated cart
    })
    .catch(error => console.error('Error:', error));
}

function decreaseQuantity(productId) {
        // Send AJAX request to server to decrease item quantity in the cart
        updateQuantity(productId, -1);
    }

    function increaseQuantity(productId) {
        // Send AJAX request to server to increase item quantity in the cart
        updateQuantity(productId, 1);
    }

    function updateQuantity(productId, change) {
        // Send AJAX request to server to update item quantity in the cart
        fetch('/update-cart-quantity', {
            method: 'POST',
            body: JSON.stringify({ productId, change }),
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            // Handle response (optional)
            console.log(data);
            // Reload the page or update the cart display as needed
            location.reload(); // Reload the page to reflect the updated cart
        })
        .catch(error => console.error('Error:', error));
    }
</script>
</html>